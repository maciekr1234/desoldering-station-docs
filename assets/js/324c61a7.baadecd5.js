"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[5204],{2301:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>g,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"core/logging","title":"Logging System","description":"Debug and diagnostic logging with severity levels.","source":"@site/docs/core/logging.md","sourceDirName":"core","slug":"/core/logging","permalink":"/desoldering-station-docs/docs/core/logging","draft":false,"unlisted":false,"editUrl":"https://github.com/maciekr1234/desoldering-station/tree/master/docs-site/docs/core/logging.md","tags":[],"version":"current","lastUpdatedAt":1766797362000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Settings System","permalink":"/desoldering-station-docs/docs/core/settings"},"next":{"title":"GUI","permalink":"/desoldering-station-docs/docs/category/gui"}}');var r=i(74848),l=i(28453);const s={sidebar_position:2},o="Logging System",d={},c=[{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Severity Levels",id:"severity-levels",level:2},{value:"Configuration",id:"configuration",level:3},{value:"Example Usage",id:"example-usage",level:2},{value:"Basic Logging",id:"basic-logging",level:3},{value:"Output Format",id:"output-format",level:3},{value:"Conditional Logging",id:"conditional-logging",level:3},{value:"Log Levels Configuration",id:"log-levels-configuration",level:2},{value:"Compile-Time Filtering",id:"compile-time-filtering",level:3},{value:"Runtime Output Redirection",id:"runtime-output-redirection",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Tag Naming",id:"tag-naming",level:3},{value:"Message Guidelines",id:"message-guidelines",level:3},{value:"Performance",id:"performance",level:3},{value:"Source Files",id:"source-files",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"logging-system",children:"Logging System"})}),"\n",(0,r.jsx)(n.p,{children:"Debug and diagnostic logging with severity levels."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"The logging system provides macros for outputting debug messages with different severity levels. It wraps the Pico SDK logging with consistent formatting and optional output redirection."}),"\n",(0,r.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"5 severity levels (Error, Warning, Info, Debug, Verbose)"}),"\n",(0,r.jsx)(n.li,{children:"Tag-based categorization"}),"\n",(0,r.jsx)(n.li,{children:"Compile-time level filtering"}),"\n",(0,r.jsx)(n.li,{children:"Custom output redirection"}),"\n",(0,r.jsx)(n.li,{children:"Minimal overhead when disabled"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"severity-levels",children:"Severity Levels"}),"\n",(0,r.jsx)(n.mermaid,{value:'block-beta\n  columns 1\n  block:critical["\ud83d\udd34 ERROR"]:1\n    e["Critical failures requiring attention"]\n  end\n  block:warn["\ud83d\udfe0 WARNING"]:1\n    w["Unexpected but recoverable"]\n  end\n  block:info["\ud83d\udfe2 INFO"]:1\n    i["Normal operational messages"]\n  end\n  block:debug["\ud83d\udd35 DEBUG"]:1\n    d["Development debugging"]\n  end\n  block:verbose["\ud83d\udfe3 VERBOSE"]:1\n    v["Detailed trace information"]\n  end\n\n  style critical fill:#c53030,color:#fff\n  style warn fill:#dd6b20,color:#fff\n  style info fill:#38a169,color:#fff\n  style debug fill:#3182ce,color:#fff\n  style verbose fill:#805ad5,color:#fff\n```| Level | Macro | Use Case |\n|-------|-------|----------|\n| Error | `PICO_LOGE` | Critical failures, requires attention |\n| Warning | `PICO_LOGW` | Unexpected but recoverable situations |\n| Info | `PICO_LOGI` | Normal operational messages |\n| Debug | `PICO_LOGD` | Development debugging info |\n| Verbose | `PICO_LOGV` | Detailed trace information |\n\n## API Reference\n\n### Logging Macros\n\n```cpp\n#include "core/pico_log.h"\n\n// Log with tag and format string\nPICO_LOGE(tag, format, ...)  // Error\nPICO_LOGW(tag, format, ...)  // Warning\nPICO_LOGI(tag, format, ...)  // Info\nPICO_LOGD(tag, format, ...)  // Debug\nPICO_LOGV(tag, format, ...)  // Verbose'}),"\n",(0,r.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:"// Set minimum log level (compile-time)\n#define PICO_LOG_LEVEL PICO_LOG_LEVEL_DEBUG\n\n// Set output function (runtime)\nvoid log_set_vprintf(int (*func)(const char*, va_list));\n"})}),"\n",(0,r.jsx)(n.h2,{id:"example-usage",children:"Example Usage"}),"\n",(0,r.jsx)(n.h3,{id:"basic-logging",children:"Basic Logging"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'#include "core/pico_log.h"\n\nstatic const char* TAG = "heater";\n\nvoid heater_init() {\n    PICO_LOGI(TAG, "Initializing heater controller");\n    \n    if (!setup_pwm()) {\n        PICO_LOGE(TAG, "PWM setup failed on pin %d", CONFIG_HEATER_PIN);\n        return;\n    }\n    \n    PICO_LOGD(TAG, "PWM configured: freq=%dHz", CONFIG_HEATER_PWM_FREQ);\n}\n\nvoid heater_update(float temp) {\n    PICO_LOGV(TAG, "Current temp: %.1f\xb0C", temp);\n    \n    if (temp > MAX_SAFE_TEMP) {\n        PICO_LOGW(TAG, "Temperature %.1f exceeds safe limit!", temp);\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"output-format",children:"Output Format"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"I (12345) heater: Initializing heater controller\nE (12346) heater: PWM setup failed on pin 6\nD (12347) heater: PWM configured: freq=25000Hz\nV (12400) heater: Current temp: 245.3\xb0C\nW (12450) heater: Temperature 501.2 exceeds safe limit!\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"LEVEL (timestamp_ms) tag: message"})]}),"\n",(0,r.jsx)(n.h3,{id:"conditional-logging",children:"Conditional Logging"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'// Only compiled in debug builds\n#ifdef DEBUG\n    PICO_LOGD(TAG, "Debug info: state=%d, power=%d%%", state, power);\n#endif\n\n// Level filtering at compile time\n#if PICO_LOG_LEVEL >= PICO_LOG_LEVEL_VERBOSE\n    PICO_LOGV(TAG, "Detailed trace...");\n#endif\n'})}),"\n",(0,r.jsx)(n.h2,{id:"log-levels-configuration",children:"Log Levels Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"compile-time-filtering",children:"Compile-Time Filtering"}),"\n",(0,r.jsxs)(n.p,{children:["In ",(0,r.jsx)(n.code,{children:"platformio.ini"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"build_flags = \n    -DPICO_LOG_LEVEL=PICO_LOG_LEVEL_INFO  ; Only INFO and above\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Define"}),(0,r.jsx)(n.th,{children:"Value"}),(0,r.jsx)(n.th,{children:"Includes"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PICO_LOG_LEVEL_NONE"})}),(0,r.jsx)(n.td,{children:"0"}),(0,r.jsx)(n.td,{children:"Nothing"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PICO_LOG_LEVEL_ERROR"})}),(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"Errors only"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PICO_LOG_LEVEL_WARN"})}),(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"+ Warnings"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PICO_LOG_LEVEL_INFO"})}),(0,r.jsx)(n.td,{children:"3"}),(0,r.jsx)(n.td,{children:"+ Info"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PICO_LOG_LEVEL_DEBUG"})}),(0,r.jsx)(n.td,{children:"4"}),(0,r.jsx)(n.td,{children:"+ Debug"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PICO_LOG_LEVEL_VERBOSE"})}),(0,r.jsx)(n.td,{children:"5"}),(0,r.jsx)(n.td,{children:"Everything"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"runtime-output-redirection",children:"Runtime Output Redirection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:"// Redirect to custom output (e.g., UART, display)\nint my_log_output(const char* fmt, va_list args) {\n    char buf[256];\n    int len = vsnprintf(buf, sizeof(buf), fmt, args);\n    uart_write(buf, len);\n    return len;\n}\n\nvoid setup() {\n    log_set_vprintf(my_log_output);\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"tag-naming",children:"Tag Naming"}),"\n",(0,r.jsx)(n.p,{children:"Use short, consistent tags:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'static const char* TAG = "heater";   // \u2705 Good\nstatic const char* TAG = "HeaterController::update";  // \u274c Too long\n'})}),"\n",(0,r.jsx)(n.h3,{id:"message-guidelines",children:"Message Guidelines"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'// \u2705 Good: Actionable, includes context\nPICO_LOGE(TAG, "Init failed: PWM slice %d unavailable", slice);\n\n// \u274c Bad: Vague, no context\nPICO_LOGE(TAG, "Error!");\n\n// \u2705 Good: Includes relevant values\nPICO_LOGW(TAG, "Temp %.1f\xb0C exceeds limit %d\xb0C", temp, limit);\n\n// \u274c Bad: Missing units/context\nPICO_LOGW(TAG, "Temp too high: %f", temp);\n'})}),"\n",(0,r.jsx)(n.h3,{id:"performance",children:"Performance"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'// \u2705 Good: Avoid expensive operations if level disabled\nif (PICO_LOG_LEVEL >= PICO_LOG_LEVEL_DEBUG) {\n    float avg = compute_expensive_average();\n    PICO_LOGD(TAG, "Average: %.2f", avg);\n}\n\n// \u274c Bad: Always computes even if not logged\nPICO_LOGD(TAG, "Average: %.2f", compute_expensive_average());\n'})}),"\n",(0,r.jsx)(n.h2,{id:"source-files",children:"Source Files"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Header: ",(0,r.jsx)(n.code,{children:"include/core/pico_log.h"})]}),"\n",(0,r.jsxs)(n.li,{children:["Implementation: ",(0,r.jsx)(n.code,{children:"src/core/pico_log.cpp"})]}),"\n"]})]})}function g(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>o});var t=i(96540);const r={},l=t.createContext(r);function s(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);