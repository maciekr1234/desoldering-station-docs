"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[3825],{28453:(e,t,n)=>{n.d(t,{R:()=>_,x:()=>c});var i=n(96540);const s={},l=i.createContext(s);function _(e){const t=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:_(e.components),i.createElement(l.Provider,{value:t},e.children)}},54586:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>_,metadata:()=>i,toc:()=>r});const i=JSON.parse('{"id":"gui/lv-settings-menu","title":"Settings Menu Widget","description":"Custom LVGL widget for hierarchical settings menus.","source":"@site/versioned_docs/version-0.1.0/gui/lv-settings-menu.md","sourceDirName":"gui","slug":"/gui/lv-settings-menu","permalink":"/desoldering-station-docs/docs/0.1.0/gui/lv-settings-menu","draft":false,"unlisted":false,"editUrl":"https://github.com/maciekr1234/desoldering-station/tree/master/docs-site/versioned_docs/version-0.1.0/gui/lv-settings-menu.md","tags":[],"version":"0.1.0","lastUpdatedAt":1766956566000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"GUI Overview","permalink":"/desoldering-station-docs/docs/0.1.0/gui/overview"},"next":{"title":"Menu Structure","permalink":"/desoldering-station-docs/docs/0.1.0/gui/menu-structure"}}');var s=n(74848),l=n(28453);const _={sidebar_position:2},c="Settings Menu Widget",a={},r=[{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Item Types",id:"item-types",level:2},{value:"Switch Display Modes",id:"switch-display-modes",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"Menu &amp; Page Creation",id:"menu--page-creation",level:3},{value:"Item Creation",id:"item-creation",level:3},{value:"Value Getters/Setters",id:"value-getterssetters",level:3},{value:"Switch Configuration",id:"switch-configuration",level:3},{value:"Numeric Configuration",id:"numeric-configuration",level:3},{value:"Select Configuration",id:"select-configuration",level:3},{value:"Subject Binding",id:"subject-binding",level:3},{value:"Example Usage",id:"example-usage",level:2},{value:"Basic Menu with Pages",id:"basic-menu-with-pages",level:3},{value:"Decimal / Floating-Point Values",id:"decimal--floating-point-values",level:3},{value:"Float Subject Binding",id:"float-subject-binding",level:3},{value:"Select Item with Options",id:"select-item-with-options",level:3},{value:"Subpage Navigation",id:"subpage-navigation",level:3},{value:"Data Binding with Subjects",id:"data-binding-with-subjects",level:3},{value:"Data Flow",id:"data-flow",level:2},{value:"Source Files",id:"source-files",level:2}];function o(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"settings-menu-widget",children:"Settings Menu Widget"})}),"\n",(0,s.jsx)(t.p,{children:"Custom LVGL widget for hierarchical settings menus."}),"\n",(0,s.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"lv_settings_menu"})," is a custom widget that provides a hierarchical settings interface with multiple item types, LVGL subject binding, and encoder-friendly navigation."]}),"\n",(0,s.jsx)(t.h2,{id:"features",children:"Features"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Hierarchical menu structure with pages and sections"}),"\n",(0,s.jsx)(t.li,{children:"Multiple item types (text, button, switch, numeric, select, subpage)"}),"\n",(0,s.jsxs)(t.li,{children:["Automatic ",(0,s.jsx)(t.code,{children:"lv_subject"})," binding for reactive updates"]}),"\n",(0,s.jsx)(t.li,{children:"Customizable switch display modes"}),"\n",(0,s.jsx)(t.li,{children:"Numeric items with step, range, and format options"}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"item-types",children:"Item Types"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Type"}),(0,s.jsx)(t.th,{children:"Enum"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Text"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"LV_SETTINGS_ITEM_TYPE_TEXT"})}),(0,s.jsx)(t.td,{children:"Static text with description"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Button"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"LV_SETTINGS_ITEM_TYPE_BUTTON"})}),(0,s.jsx)(t.td,{children:"Clickable action button"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Subpage"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"LV_SETTINGS_ITEM_TYPE_SUBPAGE"})}),(0,s.jsx)(t.td,{children:"Opens another settings page"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Switch"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"LV_SETTINGS_ITEM_TYPE_SWITCH"})}),(0,s.jsx)(t.td,{children:"Boolean toggle"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Numeric"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"LV_SETTINGS_ITEM_TYPE_NUMERIC"})}),(0,s.jsx)(t.td,{children:"Adjustable number value"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Select"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"LV_SETTINGS_ITEM_TYPE_SELECT"})}),(0,s.jsx)(t.td,{children:"Choice from options"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"switch-display-modes",children:"Switch Display Modes"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-cpp",children:'enum {\n    LV_SETTINGS_ITEM_SWITCH_ENABLED_DISABLED,  // "Enabled"/"Disabled"\n    LV_SETTINGS_ITEM_SWITCH_TRUE_FALSE,        // "True"/"False"  \n    LV_SETTINGS_ITEM_SWITCH_ON_OFF,            // "On"/"Off"\n};\n'})}),"\n",(0,s.jsx)(t.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,s.jsx)(t.h3,{id:"menu--page-creation",children:"Menu & Page Creation"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-cpp",children:'#include "gui/extra/lv_settings_menu.h"\n\n// Create settings menu container\nlv_obj_t* lv_settings_menu_create(lv_obj_t* parent);\n\n// Create a settings page within the menu\nlv_obj_t* lv_settings_page_create(lv_obj_t* menu, const char* title);\n\n// Create a section within a page\nlv_obj_t* lv_settings_section_create(lv_obj_t* parent);\n'})}),"\n",(0,s.jsx)(t.h3,{id:"item-creation",children:"Item Creation"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-cpp",children:"// Generic item\nlv_obj_t* lv_settings_item_create(lv_obj_t* parent);\n\n// Text item (display only)\nlv_obj_t* lv_settings_item_create_text(lv_obj_t* parent, \n                                        const char* text, \n                                        const char* description);\n\n// Button item (clickable action)\nlv_obj_t* lv_settings_item_create_button(lv_obj_t* parent, \n                                          const char* title);\n\n// Subpage item (opens another page)\n// NOTE: Pages are created on-demand and deleted on back navigation to free memory\nlv_obj_t* lv_settings_item_create_subpage(lv_obj_t* parent, \n                                           const char* title, \n                                           lv_settings_menu_create_page_t page_cb);\n\n// Switch item (boolean toggle)\nlv_obj_t* lv_settings_item_create_switch(lv_obj_t* parent, \n                                          const char* title, \n                                          bool state);\n\n// Numeric item (adjustable value)\nlv_obj_t* lv_settings_item_create_numeric(lv_obj_t* parent, \n                                           const char* title, \n                                           int32_t value);\n\n// Select item (dropdown options)\nlv_obj_t* lv_settings_select_create(lv_obj_t* parent, \n                                     const char* title);\n"})}),"\n",(0,s.jsx)(t.h3,{id:"value-getterssetters",children:"Value Getters/Setters"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-cpp",children:"// Get item type\nlv_settings_item_type_t lv_settings_item_get_type(lv_obj_t* obj);\n\n// Get/set generic value (switch: 0/1, numeric: value)\nint32_t lv_settings_item_get_value(lv_obj_t* obj);\nvoid lv_settings_item_set_value(lv_obj_t* obj, int32_t value);\n"})}),"\n",(0,s.jsx)(t.h3,{id:"switch-configuration",children:"Switch Configuration"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-cpp",children:"// Set display mode (Enabled/Disabled, True/False, On/Off)\nvoid lv_settings_item_set_switch_mode(lv_obj_t* obj, \n                                       lv_settings_item_switch_mode_t mode);\n\n// Set switch state directly\nvoid lv_settings_item_set_switch_value(lv_obj_t* obj, bool state);\n"})}),"\n",(0,s.jsx)(t.h3,{id:"numeric-configuration",children:"Numeric Configuration"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-cpp",children:'// Set increment step (in internal units)\nvoid lv_settings_item_set_numeric_step(lv_obj_t* obj, uint32_t step);\n\n// Set valid range (in internal units)\nvoid lv_settings_item_set_numeric_range(lv_obj_t* obj, int32_t min, int32_t max);\n\n// Set value (in internal units)\nvoid lv_settings_item_set_numeric_value(lv_obj_t* obj, int32_t value);\n\n// Set decimal places (0 = integer, 1-4 = fixed-point)\nvoid lv_settings_item_set_numeric_decimal_places(lv_obj_t* obj, uint8_t places);\n\n// Set unit suffix (e.g., " \xb0C", " %")\nvoid lv_settings_item_set_numeric_unit(lv_obj_t* obj, const char* unit);\n\n// Float convenience functions (auto-convert using decimal_places)\nvoid lv_settings_item_set_numeric_value_float(lv_obj_t* obj, float value);\nvoid lv_settings_item_set_numeric_range_float(lv_obj_t* obj, float min, float max);\nfloat lv_settings_item_get_value_float(lv_obj_t* obj);\n\n// DEPRECATED: Use lv_settings_item_set_numeric_unit() instead\nvoid lv_settings_item_set_numeric_value_fmt(lv_obj_t* obj, const char* fmt);\n'})}),"\n",(0,s.jsx)(t.h3,{id:"select-configuration",children:"Select Configuration"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-cpp",children:"// Set options (copies strings, newline-separated)\nvoid lv_settings_select_set_options(lv_obj_t* obj, const char* options);\n\n// Set options (static array, no copy)\nvoid lv_settings_select_set_options_static(lv_obj_t* obj, \n                                            const char** options, \n                                            uint32_t count);\n\n// Get/set selected index\nuint32_t lv_settings_select_get_index(lv_obj_t* obj);\nvoid lv_settings_select_set_index(lv_obj_t* obj, uint32_t index);\n\n// Get selected text\nconst char* lv_settings_select_get_text(lv_obj_t* obj);\n"})}),"\n",(0,s.jsx)(t.h3,{id:"subject-binding",children:"Subject Binding"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-cpp",children:"// Bind switch to integer subject (0/1)\nlv_observer_t* lv_settings_switch_bind_value(lv_obj_t* obj, \n                                              lv_subject_t* subject);\n\n// Bind numeric to INT or FLOAT subject\n// - INT: direct mapping of internal fixed-point value\n// - FLOAT: auto-converts using decimal_places (e.g., 1234 with 2 decimals = 12.34f)\nlv_observer_t* lv_settings_numeric_bind_value(lv_obj_t* obj, \n                                               lv_subject_t* subject);\n\n// Bind select index to integer subject\nlv_observer_t* lv_settings_select_bind_index(lv_obj_t* obj, \n                                              lv_subject_t* subject);\n\n// Bind select text to string subject (one-way: widget -> subject)\nlv_observer_t* lv_settings_select_bind_value(lv_obj_t* obj, \n                                              lv_subject_t* subject);\n"})}),"\n",(0,s.jsx)(t.h2,{id:"example-usage",children:"Example Usage"}),"\n",(0,s.jsx)(t.h3,{id:"basic-menu-with-pages",children:"Basic Menu with Pages"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-cpp",children:'// Create main menu\nlv_obj_t* menu = lv_settings_menu_create(lv_scr_act());\n\n// Create main page\nlv_obj_t* main_page = lv_settings_page_create(menu, "Settings");\n\n// Add sections and items\nlv_obj_t* section = lv_settings_section_create(main_page);\n\n// Switch item\nlv_obj_t* dark_mode = lv_settings_item_create_switch(section, "Dark Mode", true);\nlv_settings_item_set_switch_mode(dark_mode, LV_SETTINGS_ITEM_SWITCH_ON_OFF);\n\n// Integer numeric item with unit suffix\nlv_obj_t* temp = lv_settings_item_create_numeric(section, "Temperature", 350);\nlv_settings_item_set_numeric_range(temp, 100, 450);\nlv_settings_item_set_numeric_step(temp, 5);\nlv_settings_item_set_numeric_unit(temp, " \xb0C");\n'})}),"\n",(0,s.jsx)(t.h3,{id:"decimal--floating-point-values",children:"Decimal / Floating-Point Values"}),"\n",(0,s.jsxs)(t.p,{children:["The numeric widget supports fixed-point decimal values using ",(0,s.jsx)(t.code,{children:"decimal_places"}),".\nInternally, values are stored as integers for precision, but displayed with a decimal point."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-cpp",children:'// PID gain with 2 decimal places (displayed as "12.50")\nlv_obj_t* kp = lv_settings_item_create_numeric(section, "Kp", 1250);\nlv_settings_item_set_numeric_decimal_places(kp, 2);  // 1250 -> "12.50"\nlv_settings_item_set_numeric_range(kp, 0, 10000);    // 0.00 to 100.00\nlv_settings_item_set_numeric_step(kp, 1);            // Step by 0.01\n\n// Using float convenience functions (auto-converts to internal representation)\nlv_settings_item_set_numeric_decimal_places(kp, 2);\nlv_settings_item_set_numeric_range_float(kp, 0.0f, 100.0f);\nlv_settings_item_set_numeric_value_float(kp, 12.5f);\nfloat current_kp = lv_settings_item_get_value_float(kp);  // Returns 12.5f\n'})}),"\n",(0,s.jsx)(t.h3,{id:"float-subject-binding",children:"Float Subject Binding"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-cpp",children:'// Create a float subject\nstatic lv_subject_t subject_kp;\nlv_subject_init_float(&subject_kp, 12.5f);\n\n// Create numeric item with 2 decimal places\nlv_obj_t* kp = lv_settings_item_create_numeric(section, "Kp", 0);\nlv_settings_item_set_numeric_decimal_places(kp, 2);\nlv_settings_item_set_numeric_range_float(kp, 0.0f, 100.0f);\n\n// Bind to float subject - auto-converts between internal int and float\nlv_settings_numeric_bind_value(kp, &subject_kp);\n// Widget shows "12.50", subject contains 12.5f\n'})}),"\n",(0,s.jsx)(t.h3,{id:"select-item-with-options",children:"Select Item with Options"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-cpp",children:'lv_obj_t* unit_select = lv_settings_select_create(section, "Temperature Unit");\n\n// Option 1: Newline-separated string (copied)\nlv_settings_select_set_options(unit_select, "Celsius\\nFahrenheit\\nKelvin");\n\n// Option 2: Static array (no copy, must remain valid)\nstatic const char* units[] = {"Celsius", "Fahrenheit", "Kelvin"};\nlv_settings_select_set_options_static(unit_select, units, 3);\n\nlv_settings_select_set_index(unit_select, 0);  // Select "Celsius"\n'})}),"\n",(0,s.jsx)(t.h3,{id:"subpage-navigation",children:"Subpage Navigation"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-cpp",children:'// Callback to create PID settings page\nlv_obj_t* create_pid_page(lv_obj_t* menu) {\n    lv_obj_t* page = lv_settings_page_create(menu, "PID Settings");\n    lv_obj_t* section = lv_settings_section_create(page);\n    \n    // PID gains with 2 decimal places\n    lv_obj_t* kp = lv_settings_item_create_numeric(section, "Kp", 1000);\n    lv_settings_item_set_numeric_decimal_places(kp, 2);\n    lv_settings_item_set_numeric_range_float(kp, 0.0f, 100.0f);\n    \n    lv_obj_t* ki = lv_settings_item_create_numeric(section, "Ki", 100);\n    lv_settings_item_set_numeric_decimal_places(ki, 2);\n    lv_settings_item_set_numeric_range_float(ki, 0.0f, 100.0f);\n    \n    lv_obj_t* kd = lv_settings_item_create_numeric(section, "Kd", 200);\n    lv_settings_item_set_numeric_decimal_places(kd, 2);\n    lv_settings_item_set_numeric_range_float(kd, 0.0f, 100.0f);\n    \n    return page;\n}\n\n// Add subpage item\nlv_settings_item_create_subpage(section, "PID Settings", create_pid_page);\n'})}),"\n",(0,s.jsx)(t.h3,{id:"data-binding-with-subjects",children:"Data Binding with Subjects"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-cpp",children:'// Create subjects\nstatic lv_subject_t subject_brightness;\nstatic lv_subject_t subject_encoder_inverted;\n\nlv_subject_init_int(&subject_brightness, 100);\nlv_subject_init_int(&subject_encoder_inverted, 0);\n\n// Create items and bind\nlv_obj_t* brightness = lv_settings_item_create_numeric(section, "Brightness", 100);\nlv_settings_item_set_numeric_range(brightness, 0, 100);\nlv_settings_numeric_bind_value(brightness, &subject_brightness);\n\nlv_obj_t* encoder = lv_settings_item_create_switch(section, "Invert Encoder", false);\nlv_settings_switch_bind_value(encoder, &subject_encoder_inverted);\n\n// Subject changes automatically update the widget\n// Widget changes automatically update the subject\n'})}),"\n",(0,s.jsx)(t.h2,{id:"data-flow",children:"Data Flow"}),"\n",(0,s.jsx)(t.mermaid,{value:"sequenceDiagram\n    participant User\n    participant Widget as Settings Item\n    participant Subject as lv_subject\n    participant App as Application\n    \n    User->>Widget: Change value\n    Widget->>Subject: Update subject\n    Subject->>App: Observer callback\n    App->>App: Apply setting\n    \n    Note over Subject,Widget: Bi-directional sync\n    \n    App->>Subject: lv_subject_set_int()\n    Subject->>Widget: Update display"}),"\n",(0,s.jsx)(t.h2,{id:"source-files",children:"Source Files"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Header: ",(0,s.jsx)(t.code,{children:"include/gui/extra/lv_settings_menu.h"})]}),"\n",(0,s.jsxs)(t.li,{children:["Implementation: ",(0,s.jsx)(t.code,{children:"src/gui/extra/lv_settings_menu.c"})]}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);