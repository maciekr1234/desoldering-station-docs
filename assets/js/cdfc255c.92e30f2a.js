"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[3796],{4328:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"gui/menu-helpers","title":"Menu Helpers","description":"Helper functions for creating settings menu items.","source":"@site/docs/gui/menu-helpers.md","sourceDirName":"gui","slug":"/gui/menu-helpers","permalink":"/desoldering-station-docs/docs/gui/menu-helpers","draft":false,"unlisted":false,"editUrl":"https://github.com/maciekr1234/desoldering-station/tree/master/docs-site/docs/gui/menu-helpers.md","tags":[],"version":"current","lastUpdatedAt":1764800830000,"sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Menu Structure","permalink":"/desoldering-station-docs/docs/gui/menu-structure"},"next":{"title":"Temperature Calibration","permalink":"/desoldering-station-docs/docs/gui/temp-calibration"}}');var c=t(4848),i=t(8453);const s={sidebar_position:4},l="Menu Helpers",a={},d=[{value:"Overview",id:"overview",level:2},{value:"Usage",id:"usage",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"Page Creation",id:"page-creation",level:3},{value:"<code>create_page</code>",id:"create_page",level:4},{value:"Item Creation",id:"item-creation",level:3},{value:"<code>create_numeric</code>",id:"create_numeric",level:4},{value:"<code>create_numeric_float</code>",id:"create_numeric_float",level:4},{value:"<code>create_numeric_temperature</code>",id:"create_numeric_temperature",level:4},{value:"<code>create_switch</code>",id:"create_switch",level:4},{value:"<code>create_button</code>",id:"create_button",level:4},{value:"<code>create_subpage</code>",id:"create_subpage",level:4},{value:"<code>create_frequency_bound</code>",id:"create_frequency_bound",level:4},{value:"Complete Example",id:"complete-example",level:2},{value:"Source Files",id:"source-files",level:2}];function o(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"menu-helpers",children:"Menu Helpers"})}),"\n",(0,c.jsx)(n.p,{children:"Helper functions for creating settings menu items."}),"\n",(0,c.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,c.jsxs)(n.p,{children:["The ",(0,c.jsx)(n.code,{children:"menu_helpers"})," module provides convenience wrappers around ",(0,c.jsx)(n.code,{children:"lv_settings_menu"})," functions for common menu item patterns used in settings screens. These helpers reduce boilerplate code when building settings pages."]}),"\n",(0,c.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,c.jsx)(n.p,{children:"Include the header in your settings screen implementation:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:'#include "gui/extra/menu_helpers.h"\n'})}),"\n",(0,c.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,c.jsx)(n.h3,{id:"page-creation",children:"Page Creation"}),"\n",(0,c.jsx)(n.h4,{id:"create_page",children:(0,c.jsx)(n.code,{children:"create_page"})}),"\n",(0,c.jsx)(n.p,{children:"Create a settings page with an optional section container."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:"std::pair<lv_obj_t*, lv_obj_t*> create_page(lv_obj_t* menu, \n                                             const char* title, \n                                             bool with_section = true);\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"menu"})," \u2014 Parent settings menu object"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"title"})," \u2014 Title displayed in the page header"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"with_section"})," \u2014 Whether to create a section within the page (default: ",(0,c.jsx)(n.code,{children:"true"}),")"]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Returns:"})," A ",(0,c.jsx)(n.code,{children:"std::pair"})," containing:"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"first"})," \u2014 Pointer to the created page"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"second"})," \u2014 Pointer to the created section (or ",(0,c.jsx)(n.code,{children:"nullptr"})," if ",(0,c.jsx)(n.code,{children:"with_section"})," is ",(0,c.jsx)(n.code,{children:"false"}),")"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Example:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:'auto [page, section] = create_page(menu, "Heater Settings");\n// Add items to section...\nreturn page;\n'})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h3,{id:"item-creation",children:"Item Creation"}),"\n",(0,c.jsx)(n.h4,{id:"create_numeric",children:(0,c.jsx)(n.code,{children:"create_numeric"})}),"\n",(0,c.jsx)(n.p,{children:"Create a numeric input item with configurable range, step, and unit."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:"lv_obj_t* create_numeric(lv_obj_t*     parent,\n                         const char*   title,\n                         int32_t       value,\n                         lv_event_cb_t event_cb = nullptr,\n                         int32_t       min      = INT32_MIN,\n                         int32_t       max      = INT32_MAX,\n                         int32_t       step     = 1,\n                         const char*   unit     = nullptr);\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"parent"})," \u2014 Section to add the item to"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"title"})," \u2014 Label displayed for the item"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"value"})," \u2014 Initial integer value"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"event_cb"})," \u2014 Optional callback for ",(0,c.jsx)(n.code,{children:"LV_EVENT_VALUE_CHANGED"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"min"})," / ",(0,c.jsx)(n.code,{children:"max"})," \u2014 Value range limits"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"step"})," \u2014 Increment/decrement step"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"unit"})," \u2014 Unit suffix (e.g., ",(0,c.jsx)(n.code,{children:'" ms"'}),", ",(0,c.jsx)(n.code,{children:'" %"'}),")"]}),"\n"]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h4,{id:"create_numeric_float",children:(0,c.jsx)(n.code,{children:"create_numeric_float"})}),"\n",(0,c.jsx)(n.p,{children:"Create a floating-point numeric input with decimal places."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:"lv_obj_t* create_numeric_float(lv_obj_t*     parent,\n                               const char*   title,\n                               float         value,\n                               float         min,\n                               float         max,\n                               uint8_t       decimal_places = 2,\n                               uint32_t      step           = 1,\n                               const char*   unit           = nullptr,\n                               lv_event_cb_t event_cb       = nullptr);\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"decimal_places"})," \u2014 Number of decimal digits to display (e.g., ",(0,c.jsx)(n.code,{children:"2"})," for ",(0,c.jsx)(n.code,{children:"0.00"}),")"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"step"})," \u2014 Step in smallest units (e.g., ",(0,c.jsx)(n.code,{children:"1"})," with 2 decimal places = 0.01)"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Example:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:'create_numeric_float(section, "Kp", 2.5f, 0.0f, 100.0f, 2, 1);\n// Displays: "Kp: 2.50" with \xb10.01 step\n'})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h4,{id:"create_numeric_temperature",children:(0,c.jsx)(n.code,{children:"create_numeric_temperature"})}),"\n",(0,c.jsxs)(n.p,{children:["Create a temperature input with preset range from ",(0,c.jsx)(n.code,{children:"config.h"}),"."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:"lv_obj_t* create_numeric_temperature(lv_obj_t*     parent,\n                                     const char*   title,\n                                     int32_t       value,\n                                     uint32_t      step     = 5,\n                                     lv_event_cb_t event_cb = nullptr);\n"})}),"\n",(0,c.jsxs)(n.p,{children:["Uses ",(0,c.jsx)(n.code,{children:"CONFIG_MIN_SET_TEMP"})," and ",(0,c.jsx)(n.code,{children:"CONFIG_MAX_SET_TEMP"})," for range limits, and appends ",(0,c.jsx)(n.code,{children:'" \xb0C"'})," as the unit suffix."]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Example:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:'create_numeric_temperature(section, "Target Temperature", 350, 10);\n// Range: 50-450\xb0C, step: 10, unit: " \xb0C"\n'})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h4,{id:"create_switch",children:(0,c.jsx)(n.code,{children:"create_switch"})}),"\n",(0,c.jsx)(n.p,{children:"Create a boolean toggle switch."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:"lv_obj_t* create_switch(lv_obj_t*     parent,\n                        const char*   title,\n                        bool          state,\n                        uint8_t       mode     = 0,\n                        lv_event_cb_t event_cb = nullptr);\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"state"})," \u2014 Initial switch state (",(0,c.jsx)(n.code,{children:"true"})," = on)"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"mode"})," \u2014 Display mode:","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"0"}),' \u2014 "Enabled" / "Disabled"']}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"1"}),' \u2014 "True" / "False"']}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"2"}),' \u2014 "On" / "Off"']}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h4,{id:"create_button",children:(0,c.jsx)(n.code,{children:"create_button"})}),"\n",(0,c.jsx)(n.p,{children:"Create a clickable action button."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:"lv_obj_t* create_button(lv_obj_t* parent, \n                        const char* title, \n                        lv_event_cb_t event_cb = nullptr);\n"})}),"\n",(0,c.jsxs)(n.p,{children:["The callback is triggered on ",(0,c.jsx)(n.code,{children:"LV_EVENT_CLICKED"}),"."]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Example:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:'create_button(section, "Save Settings", [](lv_event_t* e) {\n    save_global_settings();\n});\n'})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h4,{id:"create_subpage",children:(0,c.jsx)(n.code,{children:"create_subpage"})}),"\n",(0,c.jsx)(n.p,{children:"Create a navigation item that opens another page when clicked."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:"lv_obj_t* create_subpage(lv_obj_t* parent, \n                         const char* title, \n                         lv_settings_menu_create_page_t page_create_cb);\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"page_create_cb"})," \u2014 Function that creates and returns the subpage"]}),"\n"]}),"\n",(0,c.jsx)(n.admonition,{title:"Memory Management",type:"note",children:(0,c.jsxs)(n.p,{children:["Subpages are created on-demand when clicked and ",(0,c.jsx)(n.strong,{children:"deleted when navigating back"})," to free memory immediately. This ensures RAM is freed as soon as you exit a subpage."]})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Example:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:'lv_obj_t* create_advanced_page(lv_obj_t* menu) {\n    auto [page, section] = create_page(menu, "Advanced");\n    // Add items...\n    return page;\n}\n\n// In parent page:\ncreate_subpage(section, "Advanced Settings", create_advanced_page);\n'})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h4,{id:"create_frequency_bound",children:(0,c.jsx)(n.code,{children:"create_frequency_bound"})}),"\n",(0,c.jsxs)(n.p,{children:["Create a frequency input item bound to a ",(0,c.jsx)(n.code,{children:"uint32_t"})," Hz value with automatic scale selection."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:"enum class FrequencyScale {\n    Auto,  // Automatically select best scale based on value\n    Hz,    // Display in Hertz (divisor = 1)\n    kHz,   // Display in kilohertz (divisor = 1,000)\n    MHz,   // Display in megahertz (divisor = 1,000,000)\n    GHz,   // Display in gigahertz (divisor = 1,000,000,000)\n};\n\nlv_obj_t* create_frequency_bound(lv_obj_t*      parent,\n                                 const char*    title,\n                                 uint32_t*      value,\n                                 uint32_t       min_hz,\n                                 uint32_t       max_hz,\n                                 uint32_t       step_hz = 1000,\n                                 FrequencyScale scale   = FrequencyScale::Auto);\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"value"})," \u2014 Pointer to ",(0,c.jsx)(n.code,{children:"uint32_t"})," variable storing Hz value"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"min_hz"})," / ",(0,c.jsx)(n.code,{children:"max_hz"})," \u2014 Range in Hz"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"step_hz"})," \u2014 Step increment in Hz"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"scale"})," \u2014 Display scale (",(0,c.jsx)(n.code,{children:"Auto"})," selects best unit based on max value)"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["The bound variable always stores ",(0,c.jsx)(n.strong,{children:"Hz"})," internally"]}),"\n",(0,c.jsx)(n.li,{children:"The UI displays and edits in the selected scale (kHz, MHz, etc.)"}),"\n",(0,c.jsxs)(n.li,{children:["With ",(0,c.jsx)(n.code,{children:"FrequencyScale::Auto"}),", the largest unit where max \u2265 1 is chosen"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Example:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:'// 1-100 kHz range, 1kHz step \u2192 displays as "1-100 kHz"\ncreate_frequency_bound(section, "PWM Frequency", &gSettings.pump.frequency_hz,\n                       1000, 100000, 1000);\n'})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:'#include "gui/extra/menu_helpers.h"\n#include "settings.h"\n\nstatic lv_obj_t* create_heater_page(lv_obj_t* menu) {\n    auto [page, section] = create_page(menu, "Heater");\n\n    create_numeric_temperature(section, "Default Temperature", \n                               gSettings.heater.default_temperature, 10);\n    \n    create_numeric_temperature(section, "Standby Temperature", \n                               gSettings.heater.standby_temperature, 10);\n    \n    create_switch(section, "Auto-Standby", gSettings.heater.auto_standby, 0);\n\n    return page;\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"source-files",children:"Source Files"}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"File"}),(0,c.jsx)(n.th,{children:"Description"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"include/gui/extra/menu_helpers.h"})}),(0,c.jsx)(n.td,{children:"Header with function declarations"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"src/gui/extra/menu_helpers.cpp"})}),(0,c.jsx)(n.td,{children:"Implementation"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(o,{...e})}):o(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var r=t(6540);const c={},i=r.createContext(c);function s(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:s(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);