"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[7173],{21726:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>m,contentTitle:()=>l,default:()=>o,frontMatter:()=>t,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"drivers/motor-driver","title":"Motor Driver","description":"H-bridge motor driver for the vacuum pump.","source":"@site/docs/drivers/motor-driver.md","sourceDirName":"drivers","slug":"/drivers/motor-driver","permalink":"/desoldering-station-docs/docs/drivers/motor-driver","draft":false,"unlisted":false,"editUrl":"https://github.com/maciekr1234/desoldering-station/tree/master/docs-site/docs/drivers/motor-driver.md","tags":[],"version":"current","lastUpdatedAt":1766792103000,"sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Temperature Driver","permalink":"/desoldering-station-docs/docs/drivers/temperature"},"next":{"title":"Encoder Driver","permalink":"/desoldering-station-docs/docs/drivers/encoder"}}');var r=n(74848),i=n(28453);const t={sidebar_position:5},l="Motor Driver",m={},c=[{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"State Machine",id:"state-machine",level:2},{value:"H-Bridge Control",id:"h-bridge-control",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"Configuration",id:"configuration",level:3},{value:"Constants",id:"constants",level:3},{value:"State Enum",id:"state-enum",level:3},{value:"Constructor",id:"constructor",level:3},{value:"Control Methods",id:"control-methods",level:3},{value:"Configuration Methods",id:"configuration-methods",level:3},{value:"Status Methods",id:"status-methods",level:3},{value:"Acceleration Ramping",id:"acceleration-ramping",level:2},{value:"Example Usage",id:"example-usage",level:2},{value:"Fault Handling",id:"fault-handling",level:2},{value:"Command Timeout",id:"command-timeout",level:2},{value:"Source Files",id:"source-files",level:2}];function d(e){const s={annotation:"annotation",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",math:"math",mermaid:"mermaid",mfrac:"mfrac",mi:"mi",mo:"mo",mrow:"mrow",msub:"msub",p:"p",pre:"pre",semantics:"semantics",span:"span",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"motor-driver",children:"Motor Driver"})}),"\n",(0,r.jsx)(s.p,{children:"H-bridge motor driver for the vacuum pump."}),"\n",(0,r.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(s.p,{children:"The MotorDriver class controls a brushed DC motor through an H-bridge (DRV8833 or similar). It supports speed control via PWM with smooth acceleration ramping, bidirectional operation, and fault detection."}),"\n",(0,r.jsx)(s.h2,{id:"features",children:"Features"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"PWM speed control (-1.0 to +1.0)"}),"\n",(0,r.jsx)(s.li,{children:"Smooth acceleration ramping with configurable duration"}),"\n",(0,r.jsx)(s.li,{children:"Direction control (forward/reverse)"}),"\n",(0,r.jsx)(s.li,{children:"Brake, coast, enable/disable modes"}),"\n",(0,r.jsx)(s.li,{children:"Fault detection and recovery"}),"\n",(0,r.jsx)(s.li,{children:"Command timeout protection"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"state-machine",children:"State Machine"}),"\n",(0,r.jsx)(s.mermaid,{value:"stateDiagram-v2\n    [*] --\x3e Disabled\n    Disabled --\x3e Coast: enable()\n    Coast --\x3e Forward: speed(+)\n    Coast --\x3e Reverse: speed(-)\n    Forward --\x3e Reverse: speed(-)\n    Reverse --\x3e Forward: speed(+)\n    Forward --\x3e Brake: brake()\n    Reverse --\x3e Brake: brake()\n    Forward --\x3e Coast: coast()\n    Reverse --\x3e Coast: coast()\n    Brake --\x3e Coast: coast()\n    Coast --\x3e Disabled: disable()\n    Brake --\x3e Disabled: disable()"}),"\n",(0,r.jsx)(s.h2,{id:"h-bridge-control",children:"H-Bridge Control"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"IN1"}),(0,r.jsx)(s.th,{children:"IN2"}),(0,r.jsx)(s.th,{children:"Motor State"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"PWM"}),(0,r.jsx)(s.td,{children:"LOW"}),(0,r.jsx)(s.td,{children:"Forward"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"LOW"}),(0,r.jsx)(s.td,{children:"PWM"}),(0,r.jsx)(s.td,{children:"Reverse"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"LOW"}),(0,r.jsx)(s.td,{children:"LOW"}),(0,r.jsx)(s.td,{children:"Coast (off)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"HIGH"}),(0,r.jsx)(s.td,{children:"HIGH"}),(0,r.jsx)(s.td,{children:"Brake"})]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,r.jsx)(s.h3,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-cpp",children:"typedef struct {\n    pin_size_t in1;       // Pin connected to IN1\n    pin_size_t in2;       // Pin connected to IN2\n    pin_size_t sleep_pin; // Pin connected to SLEEP (255 if unused)\n    pin_size_t fault_pin; // Pin connected to FAULT (255 if unused)\n    uint32_t   freq_hz;   // PWM frequency in Hertz\n} motor_driver_config_t;\n"})}),"\n",(0,r.jsx)(s.h3,{id:"constants",children:"Constants"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-cpp",children:"static constexpr uint32_t DEFAULT_PWM_FREQUENCY_HZ = 20000;    // 20kHz\nstatic constexpr uint32_t DEFAULT_ACCELERATION_MS = 1000;      // 1 second\nstatic constexpr uint32_t DEFAULT_COMMAND_TIMEOUT_MS = 1000;   // 1 second\nstatic constexpr uint32_t ACCELERATION_STEP_MS = 50;           // 50ms steps\nstatic constexpr float PWM_MIN_DUTY_CYCLE = 0.01f;             // 1% minimum\n"})}),"\n",(0,r.jsx)(s.h3,{id:"state-enum",children:"State Enum"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-cpp",children:"enum class State { \n    Disabled = 0, \n    Coast, \n    Forward, \n    Reverse, \n    Brake \n};\n"})}),"\n",(0,r.jsx)(s.h3,{id:"constructor",children:"Constructor"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-cpp",children:"// Full constructor\nMotorDriver(pin_size_t in1,\n            pin_size_t in2,\n            pin_size_t sleep_pin = 255,\n            pin_size_t fault_pin = 255,\n            uint32_t   freq_hz = DEFAULT_PWM_FREQUENCY_HZ);\n\n// From config struct\nMotorDriver(const motor_driver_config_t& config);\n\n// Default constructor\nMotorDriver() = default;\n"})}),"\n",(0,r.jsx)(s.h3,{id:"control-methods",children:"Control Methods"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-cpp",children:"// Enable/disable the driver (controls SLEEP pin)\nvoid enable();\nvoid disable();\n\n// Stop modes\nvoid brake();  // Active brake (both high)\nvoid coast();  // Coast (both low)\n\n// Speed control (-1.0 to +1.0, uses acceleration ramping)\nvoid speed(float speed, bool now = false);\n\n// Speed with custom ramp duration\nvoid speed(float from, float to, uint32_t duration = 1000);\n"})}),"\n",(0,r.jsx)(s.h3,{id:"configuration-methods",children:"Configuration Methods"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-cpp",children:"void setCommandTimeout(uint32_t timeoutMs);\nvoid setAccelerationTime(uint32_t accelerationMs);\nvoid setFrequency(uint32_t freqHz);\n\nuint32_t getCommandTimeout() const;\nuint32_t getAccelerationTime() const;\nuint32_t getFrequency() const;\n"})}),"\n",(0,r.jsx)(s.h3,{id:"status-methods",children:"Status Methods"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-cpp",children:"bool isMoving() const;\nbool isEnabled() const;\nbool getFault() const;\nbool recoverFromFault(uint8_t retries = 3);\nvoid resetCommandTimeout();\n"})}),"\n",(0,r.jsx)(s.h2,{id:"acceleration-ramping",children:"Acceleration Ramping"}),"\n",(0,r.jsx)(s.p,{children:"Speed changes are smoothly ramped over the configured acceleration time:"}),"\n",(0,r.jsx)(s.mermaid,{value:'graph LR\n    subgraph Acceleration["Linear Ramp"]\n        direction LR\n        T0["t=0<br/>Start"] --\x3e T1["t=250ms<br/>25%"]\n        T1 --\x3e T2["t=500ms<br/>50%"]\n        T2 --\x3e T3["t=1000ms<br/>Target"]\n    end'}),"\n",(0,r.jsxs)(s.p,{children:["The speed ramps linearly over ",(0,r.jsx)(s.code,{children:"ACCELERATION_STEP_MS"})," intervals:"]}),"\n",(0,r.jsx)(s.span,{className:"katex-display",children:(0,r.jsxs)(s.span,{className:"katex",children:[(0,r.jsx)(s.span,{className:"katex-mathml",children:(0,r.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,r.jsxs)(s.semantics,{children:[(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mi,{children:"s"}),(0,r.jsx)(s.mi,{children:"p"}),(0,r.jsx)(s.mi,{children:"e"}),(0,r.jsx)(s.mi,{children:"e"}),(0,r.jsx)(s.mi,{children:"d"}),(0,r.jsx)(s.mo,{stretchy:"false",children:"("}),(0,r.jsx)(s.mi,{children:"t"}),(0,r.jsx)(s.mo,{stretchy:"false",children:")"}),(0,r.jsx)(s.mo,{children:"="}),(0,r.jsx)(s.mi,{children:"s"}),(0,r.jsx)(s.mi,{children:"p"}),(0,r.jsx)(s.mi,{children:"e"}),(0,r.jsx)(s.mi,{children:"e"}),(0,r.jsxs)(s.msub,{children:[(0,r.jsx)(s.mi,{children:"d"}),(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mi,{children:"s"}),(0,r.jsx)(s.mi,{children:"t"}),(0,r.jsx)(s.mi,{children:"a"}),(0,r.jsx)(s.mi,{children:"r"}),(0,r.jsx)(s.mi,{children:"t"})]})]}),(0,r.jsx)(s.mo,{children:"+"}),(0,r.jsx)(s.mo,{stretchy:"false",children:"("}),(0,r.jsx)(s.mi,{children:"s"}),(0,r.jsx)(s.mi,{children:"p"}),(0,r.jsx)(s.mi,{children:"e"}),(0,r.jsx)(s.mi,{children:"e"}),(0,r.jsxs)(s.msub,{children:[(0,r.jsx)(s.mi,{children:"d"}),(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mi,{children:"t"}),(0,r.jsx)(s.mi,{children:"a"}),(0,r.jsx)(s.mi,{children:"r"}),(0,r.jsx)(s.mi,{children:"g"}),(0,r.jsx)(s.mi,{children:"e"}),(0,r.jsx)(s.mi,{children:"t"})]})]}),(0,r.jsx)(s.mo,{children:"\u2212"}),(0,r.jsx)(s.mi,{children:"s"}),(0,r.jsx)(s.mi,{children:"p"}),(0,r.jsx)(s.mi,{children:"e"}),(0,r.jsx)(s.mi,{children:"e"}),(0,r.jsxs)(s.msub,{children:[(0,r.jsx)(s.mi,{children:"d"}),(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mi,{children:"s"}),(0,r.jsx)(s.mi,{children:"t"}),(0,r.jsx)(s.mi,{children:"a"}),(0,r.jsx)(s.mi,{children:"r"}),(0,r.jsx)(s.mi,{children:"t"})]})]}),(0,r.jsx)(s.mo,{stretchy:"false",children:")"}),(0,r.jsx)(s.mo,{children:"\xd7"}),(0,r.jsxs)(s.mfrac,{children:[(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mi,{children:"s"}),(0,r.jsx)(s.mi,{children:"t"}),(0,r.jsx)(s.mi,{children:"e"}),(0,r.jsx)(s.mi,{children:"p"})]}),(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mi,{children:"t"}),(0,r.jsx)(s.mi,{children:"o"}),(0,r.jsx)(s.mi,{children:"t"}),(0,r.jsx)(s.mi,{children:"a"}),(0,r.jsx)(s.mi,{children:"l"}),(0,r.jsx)(s.mi,{mathvariant:"normal",children:"_"}),(0,r.jsx)(s.mi,{children:"s"}),(0,r.jsx)(s.mi,{children:"t"}),(0,r.jsx)(s.mi,{children:"e"}),(0,r.jsx)(s.mi,{children:"p"}),(0,r.jsx)(s.mi,{children:"s"})]})]})]}),(0,r.jsx)(s.annotation,{encoding:"application/x-tex",children:"speed(t) = speed_{start} + (speed_{target} - speed_{start}) \\times \\frac{step}{total\\_steps}"})]})})}),(0,r.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,r.jsxs)(s.span,{className:"base",children:[(0,r.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"s"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"p"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"ee"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"d"}),(0,r.jsx)(s.span,{className:"mopen",children:"("}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,r.jsx)(s.span,{className:"mclose",children:")"}),(0,r.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,r.jsx)(s.span,{className:"mrel",children:"="}),(0,r.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,r.jsxs)(s.span,{className:"base",children:[(0,r.jsx)(s.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"s"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"p"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"ee"}),(0,r.jsxs)(s.span,{className:"mord",children:[(0,r.jsx)(s.span,{className:"mord mathnormal",children:"d"}),(0,r.jsx)(s.span,{className:"msupsub",children:(0,r.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,r.jsxs)(s.span,{className:"vlist-r",children:[(0,r.jsx)(s.span,{className:"vlist",style:{height:"0.2806em"},children:(0,r.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,r.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,r.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,r.jsxs)(s.span,{className:"mord mtight",children:[(0,r.jsx)(s.span,{className:"mord mathnormal mtight",children:"s"}),(0,r.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"}),(0,r.jsx)(s.span,{className:"mord mathnormal mtight",children:"a"}),(0,r.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"r"}),(0,r.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"})]})})]})}),(0,r.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,r.jsx)(s.span,{className:"vlist-r",children:(0,r.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,r.jsx)(s.span,{})})})]})})]}),(0,r.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,r.jsx)(s.span,{className:"mbin",children:"+"}),(0,r.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,r.jsxs)(s.span,{className:"base",children:[(0,r.jsx)(s.span,{className:"strut",style:{height:"1.0361em",verticalAlign:"-0.2861em"}}),(0,r.jsx)(s.span,{className:"mopen",children:"("}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"s"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"p"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"ee"}),(0,r.jsxs)(s.span,{className:"mord",children:[(0,r.jsx)(s.span,{className:"mord mathnormal",children:"d"}),(0,r.jsx)(s.span,{className:"msupsub",children:(0,r.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,r.jsxs)(s.span,{className:"vlist-r",children:[(0,r.jsx)(s.span,{className:"vlist",style:{height:"0.2806em"},children:(0,r.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,r.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,r.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,r.jsxs)(s.span,{className:"mord mtight",children:[(0,r.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"}),(0,r.jsx)(s.span,{className:"mord mathnormal mtight",children:"a"}),(0,r.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"r"}),(0,r.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03588em"},children:"g"}),(0,r.jsx)(s.span,{className:"mord mathnormal mtight",children:"e"}),(0,r.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"})]})})]})}),(0,r.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,r.jsx)(s.span,{className:"vlist-r",children:(0,r.jsx)(s.span,{className:"vlist",style:{height:"0.2861em"},children:(0,r.jsx)(s.span,{})})})]})})]}),(0,r.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,r.jsx)(s.span,{className:"mbin",children:"\u2212"}),(0,r.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,r.jsxs)(s.span,{className:"base",children:[(0,r.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"s"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"p"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"ee"}),(0,r.jsxs)(s.span,{className:"mord",children:[(0,r.jsx)(s.span,{className:"mord mathnormal",children:"d"}),(0,r.jsx)(s.span,{className:"msupsub",children:(0,r.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,r.jsxs)(s.span,{className:"vlist-r",children:[(0,r.jsx)(s.span,{className:"vlist",style:{height:"0.2806em"},children:(0,r.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,r.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,r.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,r.jsxs)(s.span,{className:"mord mtight",children:[(0,r.jsx)(s.span,{className:"mord mathnormal mtight",children:"s"}),(0,r.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"}),(0,r.jsx)(s.span,{className:"mord mathnormal mtight",children:"a"}),(0,r.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"r"}),(0,r.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"})]})})]})}),(0,r.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,r.jsx)(s.span,{className:"vlist-r",children:(0,r.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,r.jsx)(s.span,{})})})]})})]}),(0,r.jsx)(s.span,{className:"mclose",children:")"}),(0,r.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,r.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,r.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,r.jsxs)(s.span,{className:"base",children:[(0,r.jsx)(s.span,{className:"strut",style:{height:"2.2881em",verticalAlign:"-0.996em"}}),(0,r.jsxs)(s.span,{className:"mord",children:[(0,r.jsx)(s.span,{className:"mopen nulldelimiter"}),(0,r.jsx)(s.span,{className:"mfrac",children:(0,r.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,r.jsxs)(s.span,{className:"vlist-r",children:[(0,r.jsxs)(s.span,{className:"vlist",style:{height:"1.2921em"},children:[(0,r.jsxs)(s.span,{style:{top:"-2.314em"},children:[(0,r.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,r.jsxs)(s.span,{className:"mord",children:[(0,r.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"o"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"a"}),(0,r.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,r.jsx)(s.span,{className:"mord",style:{marginRight:"0.02778em"},children:"_"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"s"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"e"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"p"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"s"})]})]}),(0,r.jsxs)(s.span,{style:{top:"-3.23em"},children:[(0,r.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,r.jsx)(s.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,r.jsxs)(s.span,{style:{top:"-3.677em"},children:[(0,r.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,r.jsxs)(s.span,{className:"mord",children:[(0,r.jsx)(s.span,{className:"mord mathnormal",children:"s"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"e"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"p"})]})]})]}),(0,r.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,r.jsx)(s.span,{className:"vlist-r",children:(0,r.jsx)(s.span,{className:"vlist",style:{height:"0.996em"},children:(0,r.jsx)(s.span,{})})})]})}),(0,r.jsx)(s.span,{className:"mclose nulldelimiter"})]})]})]})]})}),"\n",(0,r.jsxs)(s.p,{children:["Use ",(0,r.jsx)(s.code,{children:"speed(value, true)"})," to bypass ramping and set speed immediately."]}),"\n",(0,r.jsx)(s.h2,{id:"example-usage",children:"Example Usage"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-cpp",children:'#include "drivers/motor_driver.h"\n\n// Create with individual pins\nMotorDriver motor(14, 15, 13, 12, 20000);\n\n// Or from config\nmotor_driver_config_t config = {\n    .in1 = 14, .in2 = 15,\n    .sleep_pin = 13, .fault_pin = 12,\n    .freq_hz = 20000\n};\nMotorDriver motor(config);\n\nvoid setup() {\n    motor.setAccelerationTime(500);    // 500ms ramp\n    motor.setCommandTimeout(2000);      // 2s timeout\n}\n\nvoid start_pump() {\n    motor.enable();\n    motor.speed(1.0f);  // Full speed forward with ramp\n}\n\nvoid start_pump_immediate() {\n    motor.enable();\n    motor.speed(1.0f, true);  // Full speed immediately\n}\n\nvoid stop_pump() {\n    motor.coast();  // Coast to stop\n    motor.disable();\n}\n\nvoid reverse_pump() {\n    motor.speed(-0.5f);  // Half speed reverse\n}\n'})}),"\n",(0,r.jsx)(s.h2,{id:"fault-handling",children:"Fault Handling"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-cpp",children:'if (motor.getFault()) {\n    PICO_LOGE("MOTOR", "Fault detected!");\n    \n    // Attempt recovery\n    if (motor.recoverFromFault(3)) {\n        PICO_LOGI("MOTOR", "Recovered from fault");\n    } else {\n        PICO_LOGE("MOTOR", "Failed to recover");\n    }\n}\n'})}),"\n",(0,r.jsx)(s.h2,{id:"command-timeout",children:"Command Timeout"}),"\n",(0,r.jsxs)(s.p,{children:["If no speed command is received within ",(0,r.jsx)(s.code,{children:"command_timeout_ms"}),", the motor automatically coasts and disables to prevent runaway operation."]}),"\n",(0,r.jsx)(s.h2,{id:"source-files",children:"Source Files"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Header: ",(0,r.jsx)(s.code,{children:"include/drivers/motor_driver.h"})]}),"\n",(0,r.jsxs)(s.li,{children:["Implementation: ",(0,r.jsx)(s.code,{children:"src/drivers/motor_driver.cpp"})]}),"\n"]})]})}function o(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>l});var a=n(96540);const r={},i=a.createContext(r);function t(e){const s=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),a.createElement(i.Provider,{value:s},e.children)}}}]);